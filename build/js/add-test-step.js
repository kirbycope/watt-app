var addDescription;var addCommand;var addTarget;var addValue;var continueOnFailure;var execute;var draggedItem;var draggedOverItemBackgroundColor;function removeTestStep(self){var parent=self.parentNode;var grandParent=parent.parentNode;grandParent.remove();}
function createTestSteps(description,command,target,value,continueOnFailure,execute){var parentDiv=document.createElement("div");parentDiv.setAttribute("draggable","true");var testStepDivRow1=document.createElement("div");var testStepDivRow2=document.createElement("div");testStepDivRow2.setAttribute('class','test-step-row-2');var removeButton=document.createElement("button");removeButton.setAttribute("class","test-step-remove");removeButton.innerHTML="X";removeButton.title="Remove Test Step";removeButton.onclick=function(){removeTestStep(this);};testStepDivRow1.appendChild(removeButton);var expandButton=document.createElement("button");expandButton.setAttribute("class","test-step-expand");expandButton.innerHTML="+";expandButton.title="Expand Test Step";expandButton.onclick=function(){if(this.getAttribute('class')=='test-step-expand'){this.setAttribute('class','test-step-collapse');this.innerHTML='-';expandButton.title="Collapse Test Step";this.parentElement.parentElement.children[1].setAttribute('class','test-step-row-2-on');this.parentElement.parentElement.setAttribute("class","test-step-div-on");}else{this.setAttribute('class','test-step-expand');this.innerHTML='+';expandButton.title="Expand Test Step";this.parentElement.parentElement.children[1].setAttribute('class','test-step-row-2');this.parentElement.parentElement.setAttribute("class","");}};testStepDivRow1.appendChild(expandButton);var executeStep=document.createElement("input");executeStep.type="checkbox";executeStep.title="Execute Step";executeStep.setAttribute("class","test-step-execute");executeStep.checked=true;if(execute=='false'){executeStep.checked=false;}
testStepDivRow1.appendChild(executeStep);var newDescription=document.createElement("input");newDescription.setAttribute("class","test-step-description");newDescription.setAttribute("placeholder","Description");newDescription.value=description;var newSpan=document.createElement("span");newSpan.setAttribute("class","test-step-description-wrapper");newSpan.appendChild(newDescription);testStepDivRow1.appendChild(newSpan);var newCommand=document.createElement("select");newCommand.setAttribute("class","test-step-command");populateCommands(newCommand);newCommand.value=command;testStepDivRow2.appendChild(newCommand);var newTarget=document.createElement("input");newTarget.setAttribute("class","test-step-target");newTarget.setAttribute("placeholder","Target");if(target){newTarget.value=target;}
testStepDivRow2.appendChild(newTarget);var newValue=document.createElement("input");newValue.setAttribute("class","test-step-value");newValue.setAttribute("placeholder","Value");if(value){newValue.value=value;};testStepDivRow2.appendChild(newValue);var checkboxDiv=document.createElement("div");checkboxDiv.setAttribute("class","test-step-continue-div");var checkboxLabel=document.createElement("label");checkboxLabel.setAttribute("class","continue-label");checkboxLabel.textContent="Continue on Failure: ";checkboxDiv.appendChild(checkboxLabel);var continueCheckbox=document.createElement("input");continueCheckbox.type="checkbox";continueCheckbox.title="Continue on Failure";continueCheckbox.setAttribute("class","continue-checkbox");if(continueOnFailure=='true'){continueCheckbox.setAttribute("checked","true");}
checkboxDiv.appendChild(continueCheckbox);var duplicateTestLink=document.createElement("a");duplicateTestLink.innerHTML="Duplicate Step";duplicateTestLink.title="Duplicate Step";duplicateTestLink.href="#";duplicateTestLink.setAttribute("class","duplicate-step");duplicateTestLink.onclick=function(e){e.preventDefault();duplicateStep(e.target);};checkboxDiv.appendChild(duplicateTestLink);testStepDivRow2.appendChild(checkboxDiv);parentDiv.appendChild(testStepDivRow1);parentDiv.appendChild(testStepDivRow2);document.getElementById("test-steps-container").appendChild(parentDiv);clearFields();}
document.getElementById("test-step-builder-button-add").onclick=function(){var messageSpan=document.getElementById("message-span");messageSpan.value="";messageSpan.style.visibility="hidden";var addedDescription=document.getElementById("test-step-builder-description").value;var addedCommand=document.getElementById("test-step-builder-command").value;var addedTarget=document.getElementById("test-step-builder-target").value;var addedValue=document.getElementById("test-step-builder-value").value;if(addedCommand){createTestSteps(addedDescription,addedCommand,addedTarget,addedValue);}
else{messageSpan.style.visibility="visible";messageSpan.innerHTML="Command not set.";}}
function allowDrop(ev){ev.preventDefault();}
function drop(ev){ev.target.style["background-color"]=draggedOverItemBackgroundColor;try{document.getElementById("test-steps-container").insertBefore(draggedItem,ev.target.parentElement.parentElement.parentElement);}
catch(e){}}
document.getElementById("test-steps-container").ondrop=function(){drop(event);}
document.getElementById("test-steps-container").ondragover=function(){allowDrop(event);}
document.addEventListener('drag',function(e){if(e.target.getAttribute('draggable')){draggedItem=e.target;}});document.addEventListener('dragenter',function(e){if(e.target.className=="test-step-description"){draggedOverItemBackgroundColor=e.target.style["background-color"];e.target.style["background-color"]="#DDDDDD";}});document.addEventListener('dragleave',function(e){if(e.target.className=="test-step-description"){e.target.style["background-color"]=draggedOverItemBackgroundColor;}});